<div class="game-container">
  <!-- Game creation section -->
  <div class="game-setup" *ngIf="!gameId">
    <h2>Hangman Game</h2>
    
    <div class="create-game">
      <h3>Create a New Game</h3>
      <div class="form-group">
        <label for="wordInput">Enter a word (optional):</label>
        <input 
          type="text" 
          id="wordInput" 
          [(ngModel)]="newGameWord" 
          placeholder="Leave blank for random word"
          [disabled]="isCreatingGame"
        >
      </div>
      <button 
        (click)="createGame()" 
        [disabled]="isCreatingGame"
        class="btn-primary"
      >
        {{ isCreatingGame ? 'Creating...' : 'Create Game' }}
      </button>
    </div>
    
    <div class="available-games" *ngIf="availableGames.length > 0">
      <h3>Available Games</h3>
      <ul class="games-list">
        <li *ngFor="let game of availableGames">
          <span>Game #{{ game.id }}</span>
          <button (click)="joinGame(game.id!)" class="btn-secondary">Join</button>
        </li>
      </ul>
    </div>
    
    <div class="no-games" *ngIf="availableGames.length === 0">
      <p>No public games available. Create one to start playing!</p>
    </div>
  </div>
  
  <!-- Active game section -->
  <div class="active-game" *ngIf="gameId && gameState">
    <div class="game-header">
      <h2>Hangman Game #{{ gameId }}</h2>
      <div class="game-info">
        <span class="attempts">Attempts left: {{ gameState.attempts_left }}</span>
        <span class="status">Status: {{ gameState.status }}</span>
      </div>
      <div class="info-message" *ngIf="infoMessage">
        {{ infoMessage }}
      </div>
    </div>
    
    <div class="hangman-display">
      <!-- Hangman figure based on attempts left -->
      <div class="hangman-figure" [attr.data-attempts]="gameState.attempts_left">
        <!-- Base -->
        <div class="hangman-base"></div>
        <!-- Pole -->
        <div class="hangman-pole"></div>
        <!-- Top -->
        <div class="hangman-top"></div>
        <!-- Rope -->
        <div class="hangman-rope" *ngIf="gameState.attempts_left < 6"></div>
        <!-- Head -->
        <div class="hangman-head" *ngIf="gameState.attempts_left < 5"></div>
        <!-- Body -->
        <div class="hangman-body" *ngIf="gameState.attempts_left < 4"></div>
        <!-- Left arm -->
        <div class="hangman-left-arm" *ngIf="gameState.attempts_left < 3"></div>
        <!-- Right arm -->
        <div class="hangman-right-arm" *ngIf="gameState.attempts_left < 2"></div>
        <!-- Left leg -->
        <div class="hangman-left-leg" *ngIf="gameState.attempts_left < 1"></div>
        <!-- Right leg -->
        <div class="hangman-right-leg" *ngIf="gameState.attempts_left < 0"></div>
      </div>
    </div>
    
    <div class="word-display">
      <div class="word">
        <span class="letter" *ngFor="let letter of gameState.display_word.split('')">
          {{ letter === '_' ? '&nbsp;' : letter }}
        </span>
      </div>
    </div>
    
    <div class="game-controls" *ngIf="!gameOver">
      <div class="letter-input">
        <input 
          type="text" 
          [(ngModel)]="letterInput" 
          placeholder="Enter a letter" 
          maxlength="1"
          (keyup.enter)="submitLetter()"
        >
        <button (click)="submitLetter()" class="btn-primary">Guess</button>
      </div>
      
      <div class="alphabet">
        <button 
          *ngFor="let letter of alphabet" 
          (click)="makeGuess(letter)"
          [disabled]="isLetterGuessed(letter)"
          [class.correct]="isLetterGuessed(letter) && isLetterCorrect(letter)"
          [class.incorrect]="isLetterGuessed(letter) && !isLetterCorrect(letter)"
          class="letter-btn"
        >
          {{ letter }}
        </button>
      </div>
    </div>
    
    <div class="game-over" *ngIf="gameOver">
      <h3>{{ gameOverMessage }}</h3>
      <p>The word was: <strong>{{ finalWord }}</strong></p>
      <button (click)="startNewGame()" class="btn-primary">Start New Game</button>
    </div>
  </div>
</div>